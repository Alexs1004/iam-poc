{% extends "base.html" %}
{% block content %}
<section class="panel">
  <div class="hero hero--split">
    <div class="hero-content">
      <span class="hero-kicker">SCIM 2.0 · Azure Key Vault · OIDC</span>
      <h1>Enterprise IAM with cryptographic audit</h1>
      <p class="hero-lead">
        RFC 7644-compliant SCIM API for user provisioning, secured with Azure Key Vault secret management and HMAC-SHA256 signed audit trails. Built on Keycloak with OAuth/OIDC token validation.
      </p>
      <ul class="hero-points">
        <li><strong>SCIM 2.0 API:</strong> standardized user lifecycle (create, read, update, delete, filter).</li>
        <li><strong>Azure Key Vault:</strong> production-ready secrets rotation with zero code changes.</li>
        <li><strong>Cryptographic audit:</strong> tamper-proof logs with HMAC-SHA256 signatures.</li>
        <li><strong>240+ tests:</strong> ~90% coverage with unit and E2E integration tests.</li>
      </ul>
      <div class="action-buttons">
        {% if is_authenticated %}
          <a class="btn-primary" href="{{ url_for('verification.verification_page') }}">Run SCIM Verification</a>
          {% if is_admin %}
            <a class="btn-secondary" href="{{ url_for('admin.admin_dashboard') }}">Admin Dashboard</a>
          {% endif %}
          <a class="btn-outline" href="{{ url_for('admin.me') }}">View Profile</a>
        {% else %}
          {% if demo_mode %}
            <a class="btn-primary" href="{{ url_for('verification.verification_page') }}">Try SCIM Verification</a>
            <a class="btn-secondary" href="{{ url_for('auth.login') }}">Sign in with OIDC</a>
          {% else %}
            <a class="btn-primary" href="{{ url_for('auth.login') }}">Sign in with OIDC</a>
          {% endif %}
        {% endif %}
      </div>
    </div>
    <div class="hero-visual">
      <div class="hero-card">
        <h2>Technical capabilities</h2>
        <ul>
          <li><strong>SCIM API</strong> — RFC 7644 compliant with OpenAPI documentation</li>
          <li><strong>Security</strong> — JWT validation, rate limiting, OWASP headers (HSTS, CSP)</li>
          <li><strong>Automation</strong> — Joiner/Mover/Leaver workflows via service account</li>
          <li><strong>Verification</strong> — One-click validation of SCIM behavior and audit integrity</li>
          <li><strong>Production-ready</strong> — Azure Key Vault, secret rotation, Docker Compose</li>
        </ul>
        <div style="margin-top: 1.5rem; padding-top: 1rem; border-top: 1px solid rgba(255,255,255,0.1);">
          <h3 style="font-size: 0.875rem; text-transform: uppercase; letter-spacing: 0.05em; color: var(--text-muted); margin-bottom: 0.75rem;">Quick Access</h3>
          <div style="display: flex; gap: 0.5rem; flex-wrap: wrap;">
            <a href="{{ url_for('docs.scim_docs') }}" class="btn-secondary" style="font-size: 0.875rem; padding: 0.5rem 1rem;">SCIM API Docs</a>
            <a href="{{ keycloak_console_url if keycloak_console_url else 'https://localhost/admin/demo/console/' }}" target="_blank" rel="noopener noreferrer" class="btn-secondary" style="font-size: 0.875rem; padding: 0.5rem 1rem;">Keycloak Console</a>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>
{% endblock %}
